!function(){var a=null;UM.registerWidget("formula",{tpl:'<link type="text/css" rel="stylesheet" href="<%=formula_url%>formula.css"><div class="edui-formula-wrapper"><ul class="edui-tab-nav"></ul><div class="edui-tab-content"></div></div>',sourceData:{formula:{common:["{/}frac{ }{ }","^{ }/_{ }","x^{ }","x_{ }","x^{ }_{ }","{/}bar{ }","{/}sqrt{ }","{/}nthroot{ }{ }","{/}sum^{ }_{n=}","{/}sum","{/}log_{ }","{/}ln","{/}int_{ }^{ }","{/}oint_{ }^{ }"],symbol:["+","-","{/}pm","{/}times","{/}ast","{/}div","/","{/}bigtriangleup","=","{/}ne","{/}approx",">","<","{/}ge","{/}le","{/}infty","{/}cap","{/}cup","{/}because","{/}therefore","{/}subset","{/}supset","{/}subseteq","{/}supseteq","{/}nsubseteq","{/}nsupseteq","{/}in","{/}ni","{/}notin","{/}mapsto","{/}leftarrow","{/}rightarrow","{/}Leftarrow","{/}Rightarrow","{/}leftrightarrow","{/}Leftrightarrow"],letter:["{/}alpha","{/}beta","{/}gamma","{/}delta","{/}varepsilon","{/}varphi","{/}lambda","{/}mu","{/}rho","{/}sigma","{/}omega","{/}Gamma","{/}Delta","{/}Theta","{/}Lambda","{/}Xi","{/}Pi","{/}Sigma","{/}Upsilon","{/}Phi","{/}Psi","{/}Omega"]}},initContent:function(b,c){var d=this,e=d.sourceData.formula,f=b.getLang("formula")["static"],g=UMEDITOR_CONFIG.UMEDITOR_HOME_URL+"dialogs/formula/",h=$.extend({},f,{formula_url:g}),i=d.root();if(d.inited)return void d.preventDefault();d.inited=!0,a=b,d.$widget=c,i.html($.parseTmpl(d.tpl,h)),d.tabs=$.eduitab({selector:"#edui-formula-tab-Jpanel"});var j=[],k=0,l=0,m=d.root().find(".edui-tab-content");$.each(e,function(a,b){var c=[];$.each(b,function(a,b){c.push('<li class="edui-formula-latex-item" data-latex="'+b+'" style="background-position:-'+30*k+"px -"+30*l+'px"></li>'),++k>=8&&(++l,k=0)}),l++,k=0,m.append('<div class="edui-tab-pane"><ul>'+c.join("")+"</ul>"),j.push('<li class="edui-tab-item"><a href="javascript:void(0);" class="edui-tab-text">'+f["lang_tab_"+a]+"</a></li>")}),j.push('<li class="edui-formula-clearboth"></li>'),i.find(".edui-tab-nav").html(j.join("")),i.find(".edui-tab-content").append('<div class="edui-formula-clearboth"></div>'),d.switchTab(0)},initEvent:function(){var a=this;a.root().on("click",function(a){return!1}),a.root().find(".edui-tab-nav").delegate(".edui-tab-item","click",function(b){return a.switchTab(this),!1}),a.root().find(".edui-tab-pane").delegate(".edui-formula-latex-item","click",function(b){var c=$(this),d=c.attr("data-latex")||"";return d&&a.insertLatex(d.replace("{/}","\\")),a.$widget.edui().hide(),!1})},switchTab:function(a){var b=this,c=b.root(),a=$.isNumeric(a)?a:$.inArray(a,c.find(".edui-tab-nav .edui-tab-item"));c.find(".edui-tab-nav .edui-tab-item").removeClass("edui-active").eq(a).addClass("edui-active"),c.find(".edui-tab-content .edui-tab-pane").removeClass("edui-active").eq(a).addClass("edui-active"),b.autoHeight(0)},autoHeight:function(){this.$widget.height(this.root()+2)},insertLatex:function(b){a.execCommand("formula",b)},width:350,height:400})}();